<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"axis": {"domain": true, "domainColor": "#666F89", "grid": false, "gridCap": "round", "gridColor": "#B3B7C4", "gridDash": [2, 4], "gridWidth": 0.5, "labelColor": "#666F89", "labelFont": "Roboto, Arial, sans-serif", "labelPadding": 2, "tickColor": "#666F89", "tickOpacity": 0.5, "tickSize": 4, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 12}, "axisBand": {"domain": true, "labelPadding": 4, "ticks": false}, "axisY": {"domain": false, "titleAlign": "left", "titleAngle": 0, "titleX": -20, "titleY": -10}, "legend": {"labelColor": "#666F89", "labelFont": "Roboto, Arial, sans-serif", "labelFontSize": 12, "symbolSize": 40, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 12, "titlePadding": 4}, "arc": {"stroke": "#FFFFFF", "strokeWidth": 1}, "bar": {"fill": "#2770EB", "stroke": null}, "line": {"stroke": "#2770EB", "strokeWidth": 2}, "path": {"stroke": "#2770EB", "strokeWidth": 0.5}, "point": {"fill": "#2770EB", "shape": "circle", "filled": true}, "rect": {"fill": "#2770EB"}, "rule": {"stroke": "#666F89"}, "shape": {"stroke": "#2770EB"}, "text": {"color": "#19274E", "font": "Roboto, Arial, sans-serif", "fontSize": 12}, "range": {"category": ["#2770EB", "#77B98A", "#DA5252", "#FFC400", "#A87AEA", "#00A39E", "#19274E"], "diverging": ["#006360", "#2BB3AE", "#96D9D7", "#FFFFFF", "#EDAAAA", "#DA5252", "#811D1D"], "heatmap": ["#18448F", "#1B4EA5", "#2770EB", "#4C88EE", "#82ACF3", "#A6C4F7", "#E9F1FD"], "ramp": ["#18448F", "#1B4EA5", "#2770EB", "#4C88EE", "#82ACF3", "#A6C4F7", "#E9F1FD"]}, "background": "#FFFFFF", "group": {"fill": "#FFFFFF"}, "header": {"labelColor": "#19274E", "labelFont": "Roboto, Arial, sans-serif", "labelFontSize": 12, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 16}, "title": {"anchor": "start", "color": "#19274E", "font": "Roboto, Arial, sans-serif", "fontSize": 20, "fontWeight": "bold", "offset": 20, "subtitleColor": "#19274E", "subtitleFontSize": 16}, "view": {"continuousHeight": 300, "continuousWidth": 400, "stroke": "transparent"}}, "layer": [{"data": {"name": "data-a054cc3bafc717cc43aa0924927a5144"}, "mark": {"type": "line", "color": "black", "strokeWidth": 2}, "encoding": {"tooltip": [{"field": "value", "type": "quantitative"}], "x": {"axis": {"labelAngle": 0}, "field": "event_index", "title": "Time Step (Past \u2192 Recent)", "type": "ordinal"}, "y": {"field": "value", "title": "Observed Value", "type": "quantitative"}}, "selection": {"selector002": {"type": "interval", "bind": "scales", "encodings": ["x", "y"]}}}, {"data": {"name": "data-de435345109759fe91a0c27202714703"}, "mark": {"type": "circle", "opacity": 1.0, "size": 150}, "encoding": {"color": {"field": "shap_value", "scale": {"scheme": "Plasma"}, "type": "quantitative"}, "tooltip": [{"field": "event_name", "type": "nominal"}, {"field": "shap_value", "type": "quantitative"}, {"field": "observed_value", "type": "quantitative"}], "x": {"field": "event_index", "type": "ordinal"}, "y": {"field": "observed_value", "type": "quantitative"}}}], "height": 300, "resolve": {"scale": {"y": "shared"}}, "title": "Observed Data with SHAP-colored Dots (Past \u2192 Recent)", "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-a054cc3bafc717cc43aa0924927a5144": [{"value": 2.6852319194224656, "event_index": 0}, {"value": 2.717162829705238, "event_index": 1}, {"value": -0.8648524851362049, "event_index": 2}, {"value": 0.1525710653200102, "event_index": 3}, {"value": 2.598666108025472, "event_index": 4}, {"value": 2.6950809261759114, "event_index": 5}, {"value": -0.8953326551928722, "event_index": 6}, {"value": -0.18253532829578395, "event_index": 7}, {"value": -0.43555905668216766, "event_index": 8}, {"value": 0.5609847459055142, "event_index": 9}, {"value": 2.9999999999999996, "event_index": 10}, {"value": -0.3882007243963102, "event_index": 11}, {"value": 0.5771615659644291, "event_index": 12}, {"value": 0.43844563370481643, "event_index": 13}, {"value": -0.7159524848935308, "event_index": 14}, {"value": -0.6917280831321886, "event_index": 15}, {"value": -0.7172507133806341, "event_index": 16}, {"value": -0.7120926259340817, "event_index": 17}, {"value": -0.72207133371313, "event_index": 18}, {"value": -0.7918862736622847, "event_index": 19}, {"value": -0.4467183020651237, "event_index": 20}, {"value": -0.660624634472923, "event_index": 21}, {"value": -0.6623299851926141, "event_index": 22}, {"value": -0.6928545773897036, "event_index": 23}], "data-de435345109759fe91a0c27202714703": [{"Random seed": 42, "NSamples": 32000, "event_name": "Event -24", "shap_value": 0.0, "time_step": 0, "event_index": 0, "observed_value": 2.6852319194224656}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -23", "shap_value": 0.0, "time_step": 1, "event_index": 1, "observed_value": 2.717162829705238}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -22", "shap_value": 0.0, "time_step": 2, "event_index": 2, "observed_value": -0.8648524851362049}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -21", "shap_value": 0.0, "time_step": 3, "event_index": 3, "observed_value": 0.1525710653200102}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -20", "shap_value": 0.0, "time_step": 4, "event_index": 4, "observed_value": 2.598666108025472}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -19", "shap_value": 0.0, "time_step": 5, "event_index": 5, "observed_value": 2.6950809261759114}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -18", "shap_value": 0.0, "time_step": 6, "event_index": 6, "observed_value": -0.8953326551928722}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -17", "shap_value": 0.0, "time_step": 7, "event_index": 7, "observed_value": -0.18253532829578395}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -16", "shap_value": 0.0, "time_step": 8, "event_index": 8, "observed_value": -0.43555905668216766}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -15", "shap_value": 0.0, "time_step": 9, "event_index": 9, "observed_value": 0.5609847459055142}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -14", "shap_value": 0.0099834411592577, "time_step": 10, "event_index": 10, "observed_value": 2.9999999999999996}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -13", "shap_value": 0.0, "time_step": 11, "event_index": 11, "observed_value": -0.3882007243963102}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -12", "shap_value": 0.007753875364003737, "time_step": 12, "event_index": 12, "observed_value": 0.5771615659644291}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -11", "shap_value": 0.0038876293498404796, "time_step": 13, "event_index": 13, "observed_value": 0.43844563370481643}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -10", "shap_value": 0.0016503777068646586, "time_step": 14, "event_index": 14, "observed_value": -0.7159524848935308}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -9", "shap_value": 0.005477882783970572, "time_step": 15, "event_index": 15, "observed_value": -0.6917280831321886}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -8", "shap_value": 0.011008942096140603, "time_step": 16, "event_index": 16, "observed_value": -0.7172507133806341}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -7", "shap_value": 0.01325951861941485, "time_step": 17, "event_index": 17, "observed_value": -0.7120926259340817}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -6", "shap_value": 0.006009827600525264, "time_step": 18, "event_index": 18, "observed_value": -0.72207133371313}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -5", "shap_value": -0.014940744909341996, "time_step": 19, "event_index": 19, "observed_value": -0.7918862736622847}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -4", "shap_value": 0.0027996223399079645, "time_step": 20, "event_index": 20, "observed_value": -0.4467183020651237}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -3", "shap_value": -0.06094119642353593, "time_step": 21, "event_index": 21, "observed_value": -0.660624634472923}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -2", "shap_value": -0.08188847372758166, "time_step": 22, "event_index": 22, "observed_value": -0.6623299851926141}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -1", "shap_value": -0.08802602731499598, "time_step": 23, "event_index": 23, "observed_value": -0.6928545773897036}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>