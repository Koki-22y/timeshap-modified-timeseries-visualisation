<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"axis": {"domain": true, "domainColor": "#666F89", "grid": false, "gridCap": "round", "gridColor": "#B3B7C4", "gridDash": [2, 4], "gridWidth": 0.5, "labelColor": "#666F89", "labelFont": "Roboto, Arial, sans-serif", "labelPadding": 2, "tickColor": "#666F89", "tickOpacity": 0.5, "tickSize": 4, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 12}, "axisBand": {"domain": true, "labelPadding": 4, "ticks": false}, "axisY": {"domain": false, "titleAlign": "left", "titleAngle": 0, "titleX": -20, "titleY": -10}, "legend": {"labelColor": "#666F89", "labelFont": "Roboto, Arial, sans-serif", "labelFontSize": 12, "symbolSize": 40, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 12, "titlePadding": 4}, "arc": {"stroke": "#FFFFFF", "strokeWidth": 1}, "bar": {"fill": "#2770EB", "stroke": null}, "line": {"stroke": "#2770EB", "strokeWidth": 2}, "path": {"stroke": "#2770EB", "strokeWidth": 0.5}, "point": {"fill": "#2770EB", "shape": "circle", "filled": true}, "rect": {"fill": "#2770EB"}, "rule": {"stroke": "#666F89"}, "shape": {"stroke": "#2770EB"}, "text": {"color": "#19274E", "font": "Roboto, Arial, sans-serif", "fontSize": 12}, "range": {"category": ["#2770EB", "#77B98A", "#DA5252", "#FFC400", "#A87AEA", "#00A39E", "#19274E"], "diverging": ["#006360", "#2BB3AE", "#96D9D7", "#FFFFFF", "#EDAAAA", "#DA5252", "#811D1D"], "heatmap": ["#18448F", "#1B4EA5", "#2770EB", "#4C88EE", "#82ACF3", "#A6C4F7", "#E9F1FD"], "ramp": ["#18448F", "#1B4EA5", "#2770EB", "#4C88EE", "#82ACF3", "#A6C4F7", "#E9F1FD"]}, "background": "#FFFFFF", "group": {"fill": "#FFFFFF"}, "header": {"labelColor": "#19274E", "labelFont": "Roboto, Arial, sans-serif", "labelFontSize": 12, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 16}, "title": {"anchor": "start", "color": "#19274E", "font": "Roboto, Arial, sans-serif", "fontSize": 20, "fontWeight": "bold", "offset": 20, "subtitleColor": "#19274E", "subtitleFontSize": 16}, "view": {"continuousHeight": 300, "continuousWidth": 400, "stroke": "transparent"}}, "layer": [{"data": {"name": "data-a62b0cc3cc0cf61c798540071eae3bab"}, "mark": {"type": "line", "color": "black", "strokeWidth": 2}, "encoding": {"tooltip": [{"field": "value", "type": "quantitative"}], "x": {"axis": {"labelAngle": 0}, "field": "event_index", "title": "Time Step (Past \u2192 Recent)", "type": "ordinal"}, "y": {"field": "value", "title": "Observed Value", "type": "quantitative"}}, "selection": {"selector002": {"type": "interval", "bind": "scales", "encodings": ["x", "y"]}}}, {"data": {"name": "data-4ae684c2d622a996931795243e7f3fec"}, "mark": {"type": "circle", "opacity": 1.0, "size": 150}, "encoding": {"color": {"field": "shap_value", "scale": {"scheme": "Plasma"}, "type": "quantitative"}, "tooltip": [{"field": "event_name", "type": "nominal"}, {"field": "shap_value", "type": "quantitative"}, {"field": "observed_value", "type": "quantitative"}], "x": {"field": "event_index", "type": "ordinal"}, "y": {"field": "observed_value", "type": "quantitative"}}}], "height": 300, "resolve": {"scale": {"y": "shared"}}, "title": "Observed Data with SHAP-colored Dots (Past \u2192 Recent)", "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-a62b0cc3cc0cf61c798540071eae3bab": [{"value": 0.3197747807764894, "event_index": 0}, {"value": 0.3039438332148165, "event_index": 1}, {"value": 2.7127649365010935, "event_index": 2}, {"value": 1.5734087453883705, "event_index": 3}, {"value": 1.0184128855452559, "event_index": 4}, {"value": 1.5417084184585748, "event_index": 5}, {"value": 1.43224406196355, "event_index": 6}, {"value": 2.3913926420406932, "event_index": 7}, {"value": 0.4221799422040468, "event_index": 8}, {"value": 0.47425321212830907, "event_index": 9}, {"value": 0.4765770530139687, "event_index": 10}, {"value": 0.38297847188974943, "event_index": 11}, {"value": 0.3421340994600705, "event_index": 12}, {"value": 1.986999736740473, "event_index": 13}, {"value": 0.3616735873644372, "event_index": 14}, {"value": 0.5669270611408042, "event_index": 15}, {"value": 0.4056212178055776, "event_index": 16}, {"value": 2.850729082293228, "event_index": 17}, {"value": 0.4562341325782159, "event_index": 18}, {"value": -0.07707614575910468, "event_index": 19}, {"value": -0.06800415423012712, "event_index": 20}, {"value": 2.591375129209123, "event_index": 21}, {"value": 1.4235191532508156, "event_index": 22}, {"value": -0.04756635471173509, "event_index": 23}], "data-4ae684c2d622a996931795243e7f3fec": [{"Random seed": 42, "NSamples": 32000, "event_name": "Event -24", "shap_value": 0.0, "time_step": 0, "event_index": 0, "observed_value": 0.3197747807764894}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -23", "shap_value": 0.0, "time_step": 1, "event_index": 1, "observed_value": 0.3039438332148165}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -22", "shap_value": 0.0, "time_step": 2, "event_index": 2, "observed_value": 2.7127649365010935}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -21", "shap_value": 0.0003018567481123391, "time_step": 3, "event_index": 3, "observed_value": 1.5734087453883705}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -20", "shap_value": 0.0, "time_step": 4, "event_index": 4, "observed_value": 1.0184128855452559}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -19", "shap_value": 0.0004499412797409619, "time_step": 5, "event_index": 5, "observed_value": 1.5417084184585748}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -18", "shap_value": 0.00043461426823410143, "time_step": 6, "event_index": 6, "observed_value": 1.43224406196355}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -17", "shap_value": 0.001790862704842855, "time_step": 7, "event_index": 7, "observed_value": 2.3913926420406932}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -16", "shap_value": 0.0005382884618043149, "time_step": 8, "event_index": 8, "observed_value": 0.4221799422040468}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -15", "shap_value": 0.0017176953147781115, "time_step": 9, "event_index": 9, "observed_value": 0.47425321212830907}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -14", "shap_value": 0.002225023201541887, "time_step": 10, "event_index": 10, "observed_value": 0.4765770530139687}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -13", "shap_value": 0.0036999298469099773, "time_step": 11, "event_index": 11, "observed_value": 0.38297847188974943}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -12", "shap_value": 0.005553086991806233, "time_step": 12, "event_index": 12, "observed_value": 0.3421340994600705}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -11", "shap_value": 0.029418208398104162, "time_step": 13, "event_index": 13, "observed_value": 1.986999736740473}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -10", "shap_value": 0.015596675404090543, "time_step": 14, "event_index": 14, "observed_value": 0.3616735873644372}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -9", "shap_value": 0.03126977120700969, "time_step": 15, "event_index": 15, "observed_value": 0.5669270611408042}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -8", "shap_value": 0.040477275388299705, "time_step": 16, "event_index": 16, "observed_value": 0.4056212178055776}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -7", "shap_value": 0.23778168141167416, "time_step": 17, "event_index": 17, "observed_value": 2.850729082293228}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -6", "shap_value": 0.09492393626375506, "time_step": 18, "event_index": 18, "observed_value": 0.4562341325782159}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -5", "shap_value": 0.05496191102412101, "time_step": 19, "event_index": 19, "observed_value": -0.07707614575910468}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -4", "shap_value": 0.07429023418098729, "time_step": 20, "event_index": 20, "observed_value": -0.06800415423012712}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -3", "shap_value": 0.7340373477932751, "time_step": 21, "event_index": 21, "observed_value": 2.591375129209123}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -2", "shap_value": 0.48175602611583346, "time_step": 22, "event_index": 22, "observed_value": 1.4235191532508156}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -1", "shap_value": 0.08139151853754412, "time_step": 23, "event_index": 23, "observed_value": -0.04756635471173509}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>