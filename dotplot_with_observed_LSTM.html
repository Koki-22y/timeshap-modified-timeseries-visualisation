<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"axis": {"domain": true, "domainColor": "#666F89", "grid": false, "gridCap": "round", "gridColor": "#B3B7C4", "gridDash": [2, 4], "gridWidth": 0.5, "labelColor": "#666F89", "labelFont": "Roboto, Arial, sans-serif", "labelPadding": 2, "tickColor": "#666F89", "tickOpacity": 0.5, "tickSize": 4, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 12}, "axisBand": {"domain": true, "labelPadding": 4, "ticks": false}, "axisY": {"domain": false, "titleAlign": "left", "titleAngle": 0, "titleX": -20, "titleY": -10}, "legend": {"labelColor": "#666F89", "labelFont": "Roboto, Arial, sans-serif", "labelFontSize": 12, "symbolSize": 40, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 12, "titlePadding": 4}, "arc": {"stroke": "#FFFFFF", "strokeWidth": 1}, "bar": {"fill": "#2770EB", "stroke": null}, "line": {"stroke": "#2770EB", "strokeWidth": 2}, "path": {"stroke": "#2770EB", "strokeWidth": 0.5}, "point": {"fill": "#2770EB", "shape": "circle", "filled": true}, "rect": {"fill": "#2770EB"}, "rule": {"stroke": "#666F89"}, "shape": {"stroke": "#2770EB"}, "text": {"color": "#19274E", "font": "Roboto, Arial, sans-serif", "fontSize": 12}, "range": {"category": ["#2770EB", "#77B98A", "#DA5252", "#FFC400", "#A87AEA", "#00A39E", "#19274E"], "diverging": ["#006360", "#2BB3AE", "#96D9D7", "#FFFFFF", "#EDAAAA", "#DA5252", "#811D1D"], "heatmap": ["#18448F", "#1B4EA5", "#2770EB", "#4C88EE", "#82ACF3", "#A6C4F7", "#E9F1FD"], "ramp": ["#18448F", "#1B4EA5", "#2770EB", "#4C88EE", "#82ACF3", "#A6C4F7", "#E9F1FD"]}, "background": "#FFFFFF", "group": {"fill": "#FFFFFF"}, "header": {"labelColor": "#19274E", "labelFont": "Roboto, Arial, sans-serif", "labelFontSize": 12, "titleColor": "#19274E", "titleFont": "Roboto, Arial, sans-serif", "titleFontSize": 16}, "title": {"anchor": "start", "color": "#19274E", "font": "Roboto, Arial, sans-serif", "fontSize": 20, "fontWeight": "bold", "offset": 20, "subtitleColor": "#19274E", "subtitleFontSize": 16}, "view": {"continuousHeight": 300, "continuousWidth": 400, "stroke": "transparent"}}, "layer": [{"data": {"name": "data-37d7179f65b83021fff25e5aa4873962"}, "mark": {"type": "line", "color": "black", "strokeWidth": 2}, "encoding": {"tooltip": [{"field": "value", "type": "quantitative"}], "x": {"axis": {"labelAngle": 0}, "field": "event_index", "title": "Time Step (Past \u2192 Recent)", "type": "ordinal"}, "y": {"field": "value", "title": "Observed Value", "type": "quantitative"}}, "selection": {"selector002": {"type": "interval", "bind": "scales", "encodings": ["x", "y"]}}}, {"data": {"name": "data-22866b4031622644fbfef651abfbb379"}, "mark": {"type": "circle", "opacity": 1.0, "size": 150}, "encoding": {"color": {"field": "shap_value", "scale": {"scheme": "Plasma"}, "type": "quantitative"}, "tooltip": [{"field": "event_name", "type": "nominal"}, {"field": "shap_value", "type": "quantitative"}, {"field": "observed_value", "type": "quantitative"}], "x": {"field": "event_index", "type": "ordinal"}, "y": {"field": "observed_value", "type": "quantitative"}}}], "height": 300, "resolve": {"scale": {"y": "shared"}}, "title": "Observed Data with SHAP-colored Dots (Past \u2192 Recent)", "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-37d7179f65b83021fff25e5aa4873962": [{"value": 1.0794848853938206, "event_index": 0}, {"value": 0.2241405872871954, "event_index": 1}, {"value": 0.4358695980655537, "event_index": 2}, {"value": 1.1398014906973988, "event_index": 3}, {"value": 1.3037626397324924, "event_index": 4}, {"value": 0.4456069088121215, "event_index": 5}, {"value": 0.0271676763699269, "event_index": 6}, {"value": 0.34904798068782755, "event_index": 7}, {"value": 0.33663734410717105, "event_index": 8}, {"value": 0.36524521596408316, "event_index": 9}, {"value": 0.41403028221868043, "event_index": 10}, {"value": 0.42095977346346736, "event_index": 11}, {"value": 0.3745489881943251, "event_index": 12}, {"value": 0.35229535441762366, "event_index": 13}, {"value": 0.847549868213391, "event_index": 14}, {"value": 0.28634748938742594, "event_index": 15}, {"value": 0.5109711133179914, "event_index": 16}, {"value": 0.3422253738868359, "event_index": 17}, {"value": 0.28382909586099525, "event_index": 18}, {"value": 1.905146464865467, "event_index": 19}, {"value": 2.316440035589807, "event_index": 20}, {"value": 2.062297016115, "event_index": 21}, {"value": 2.1680408187448976, "event_index": 22}, {"value": 2.250799604982476, "event_index": 23}], "data-22866b4031622644fbfef651abfbb379": [{"Random seed": 42, "NSamples": 32000, "event_name": "Event -24", "shap_value": 0.010371950263558194, "time_step": 0, "event_index": 0, "observed_value": 1.0794848853938206}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -23", "shap_value": 0.005974021962781295, "time_step": 1, "event_index": 1, "observed_value": 0.2241405872871954}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -22", "shap_value": 0.008453672599363582, "time_step": 2, "event_index": 2, "observed_value": 0.4358695980655537}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -21", "shap_value": 0.01959735330788903, "time_step": 3, "event_index": 3, "observed_value": 1.1398014906973988}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -20", "shap_value": 0.025547381473870923, "time_step": 4, "event_index": 4, "observed_value": 1.3037626397324924}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -19", "shap_value": 0.01642490339235622, "time_step": 5, "event_index": 5, "observed_value": 0.4456069088121215}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -18", "shap_value": 0.008921204380556602, "time_step": 6, "event_index": 6, "observed_value": 0.0271676763699269}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -17", "shap_value": 0.019727209812029467, "time_step": 7, "event_index": 7, "observed_value": 0.34904798068782755}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -16", "shap_value": 0.021828636436798887, "time_step": 8, "event_index": 8, "observed_value": 0.33663734410717105}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -15", "shap_value": 0.02861603940056162, "time_step": 9, "event_index": 9, "observed_value": 0.36524521596408316}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -14", "shap_value": 0.032381888414020205, "time_step": 10, "event_index": 10, "observed_value": 0.41403028221868043}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -13", "shap_value": 0.03984976918552152, "time_step": 11, "event_index": 11, "observed_value": 0.42095977346346736}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -12", "shap_value": 0.04213255238880681, "time_step": 12, "event_index": 12, "observed_value": 0.3745489881943251}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -11", "shap_value": 0.04866351694578913, "time_step": 13, "event_index": 13, "observed_value": 0.35229535441762366}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -10", "shap_value": 0.09064605238347215, "time_step": 14, "event_index": 14, "observed_value": 0.847549868213391}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -9", "shap_value": 0.05905011959649997, "time_step": 15, "event_index": 15, "observed_value": 0.28634748938742594}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -8", "shap_value": 0.08444807756243311, "time_step": 16, "event_index": 16, "observed_value": 0.5109711133179914}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -7", "shap_value": 0.0738033122216197, "time_step": 17, "event_index": 17, "observed_value": 0.3422253738868359}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -6", "shap_value": 0.07644403749870171, "time_step": 18, "event_index": 18, "observed_value": 0.28382909586099525}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -5", "shap_value": 0.262312876213769, "time_step": 19, "event_index": 19, "observed_value": 1.905146464865467}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -4", "shap_value": 0.3079418389690043, "time_step": 20, "event_index": 20, "observed_value": 2.316440035589807}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -3", "shap_value": 0.25968260420679923, "time_step": 21, "event_index": 21, "observed_value": 2.062297016115}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -2", "shap_value": 0.22614404627036783, "time_step": 22, "event_index": 22, "observed_value": 2.1680408187448976}, {"Random seed": 42, "NSamples": 32000, "event_name": "Event -1", "shap_value": 0.14222088839864686, "time_step": 23, "event_index": 23, "observed_value": 2.250799604982476}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>